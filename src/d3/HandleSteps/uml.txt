@startuml
abstract class BaseStep {
  {abstract} String text
  {abstract} String[] textRows
  {abstract} Object layout
  {abstract} Step parent
  {abstract} Number index
  {abstract} Number level
  {static} Any canvas
}

class Step {
  BaseStep[] substeps
}

class LeafStep {
}

interface StrategyLayout {
  void calcSize()
  void calcSizeLeaf()
  void calcPos()
  void render()
}

class HorizontalLayout {
}

interface Element {
  void accept(IVisitor)
}

interface IVisitor {
  void visitStep(Step)
  void visitLeafStep(LeafStep)
  StrategyLayout sl
}

class SizeVisitor {}
class PosVisitor {}
class RenderVisitor {}

BaseStep <|-- Step
BaseStep <|-- LeafStep

Element <|-- BaseStep

IVisitor --> "1" StrategyLayout
IVisitor --> "visit" BaseStep
IVisitor <-- "accept" BaseStep
IVisitor <|-- SizeVisitor
IVisitor <|-- PosVisitor
IVisitor <|-- RenderVisitor

StrategyLayout <|-- HorizontalLayout
@enduml
